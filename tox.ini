[tox]
env_list = py{310,311,312,313}, lint, type
min_version = 4.0

[testenv]
description = Run tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    pytest>=7.0
    pytest-cov>=4.0
commands =
    pytest {posargs:--cov=checkmytex --cov-report=term-missing}

[testenv:lint]
description = Run linters (ruff)
skip_install = true
deps =
    ruff>=0.1.0
commands =
    ruff check checkmytex tests
    ruff format --check checkmytex tests

[testenv:type]
description = Run type checking with mypy
deps =
    mypy>=1.0
    pytest
    types-setuptools
commands =
    mypy checkmytex tests

[testenv:dev]
description = Development environment with all tools
usedevelop = true
deps =
    pytest>=7.0
    pytest-cov>=4.0
    ruff>=0.1.0
    mypy>=1.0
    pre-commit>=3.0
commands =
    python -m pip list --format=columns
    python -c 'import sys; print(sys.version)'
